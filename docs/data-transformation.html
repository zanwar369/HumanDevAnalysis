<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Human Development Analysis</title>
  <meta name="description" content="Chapter 3 Data transformation | Human Development Analysis" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Human Development Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Human Development Analysis" />
  
  
  

<meta name="author" content="Zohaib Anwar, Lu Bin Liu, Michelle Strayer" />


<meta name="date" content="2020-12-15" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">HumDev</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#inequality-data-transformation"><i class="fa fa-check"></i><b>3.1</b> Inequality Data Transformation</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#human-security-data-transformation"><i class="fa fa-check"></i><b>3.2</b> Human Security Data Transformation</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#education-data-transformation"><i class="fa fa-check"></i><b>3.3</b> Education Data Transformation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#inequality-missing-data"><i class="fa fa-check"></i><b>4.1</b> Inequality Missing Data</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#human-security-missing-data"><i class="fa fa-check"></i><b>4.2</b> Human Security Missing Data</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#education-missing-data"><i class="fa fa-check"></i><b>4.3</b> Education Missing Data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#variable-selection"><i class="fa fa-check"></i><b>5.1</b> Variable Selection</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#inequality-variable-selection"><i class="fa fa-check"></i><b>5.1.1</b> Inequality Variable Selection</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#education-variable-selection"><i class="fa fa-check"></i><b>5.1.2</b> Education Variable Selection</a></li>
<li class="chapter" data-level="5.1.3" data-path="results.html"><a href="results.html#human-security-variable-selection"><i class="fa fa-check"></i><b>5.1.3</b> Human Security Variable Selection</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#education-versus-human-security-2010---2018"><i class="fa fa-check"></i><b>5.2</b> Education versus Human Security (2010 - 2018)</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#inequality-versus-education-2010---2018"><i class="fa fa-check"></i><b>5.3</b> Inequality versus Education (2010 - 2018)</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#inequaity-versus-human-security-2010---2018"><i class="fa fa-check"></i><b>5.4</b> Inequaity versus Human Security (2010 - 2018)</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Human Development Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<p>In order to work with the amount of data we split the work into three separate buckets, one for each indicator: <code>Inequality</code>, <code>Human Security</code>, and <code>Education</code>. Data transformation for every indicator was similar to the process shown in detail for <code>Inequality</code>, which is not fully reproduced for the other two indicators for conciseness.</p>
<div id="inequality-data-transformation" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Inequality Data Transformation</h2>
<p>The <code>Inequality</code> indicator has 15 features from years 2010 to 2018 (one column per year). However, the data table for 6 of these features were not available for download. The remaining 9 features for which data tables were available and was extracted were:</p>
<ul>
<li><p>Coefficient of Human Inequality</p></li>
<li><p>Inequality-adjusted education index</p></li>
<li><p>Inequality-adjusted HDI (IHDI)</p></li>
<li><p>Inequality-adjusted income index</p></li>
<li><p>Inequality-adjusted life expectancy index</p></li>
<li><p>Inequality in education (%)^</p></li>
<li><p>Inequality in income (%)^</p></li>
<li><p>Inequality in life expectancy (%)</p></li>
<li><p>Overall loss in HDI due to inequality (%)</p></li>
</ul>
<p>^ Data for <code>2018</code> is either from 2018 or the latest year available.</p>
<p>Note that the column ‘HDI Rank (2018)’ is kept as a reference column and not for analysis. First all of the files are read parsing through the inequality directory, and using read.csv to read in the relevant raw data files for each variable. The files are read in iteratively such that the data frame for every feature is stored in a R list, creating a list of data frames.</p>
<p>After reading in the files, a high level look at the data itself was done. The head and tail of one of the feature data frames, one containing data for “Inequality in education (%)”, was printed as a representative sample:</p>
<pre><code>## # A tibble: 6 x 11
##   `HDI Rank (2018)` Country     `2010` `2011` `2012` `2013` `2014` `2015` `2016` `2017` `2018`
##   &lt;chr&gt;             &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; 
## 1 170               Afghanistan 39.3   39.3   39.3   45.0   44.8   44.8   45.4   45.4   45.4  
## 2 69                Albania     12.7   11.9   11.9   11.9   11.9   11.9   9.1    8.5    12.3  
## 3 82                Algeria     ..     ..     ..     ..     ..     ..     33.7   33.7   33.7  
## 4 36                Andorra     ..     ..     ..     ..     ..     ..     ..     9.4    10.0  
## 5 149               Angola      26.2   ..     34.6   34.6   34.6   34.6   34.3   34.3   34.3  
## 6 48                Argentina   12.1   12.1   12.1   8.6    8.1    8.1    6.1    6.2    6.2</code></pre>
<pre><code>## # A tibble: 6 x 11
##   `HDI Rank (2018)`                                                             Country                                   `2010` `2011` `2012` `2013` `2014` `2015` `2016` `2017` `2018`
##   &lt;chr&gt;                                                                         &lt;chr&gt;                                     &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; 
## 1 &lt;NA&gt;                                                                          Small Island Developing States            27.6   29.6   30.1   22.0   21.1   20.5   19.9   19.6   19.7  
## 2 &lt;NA&gt;                                                                          Organization for Economic Co-operation a~ 8.4    9.0    9.6    10.2   9.5    9.5    10.0   8.3    8.2   
## 3 &lt;NA&gt;                                                                          World                                     26.2   26.3   27.0   27.2   26.9   25.9   25.7   22.3   17.4  
## 4 a: See http://hdr.undp.org/en/composite/IHDI for the list of surveys used to~ &lt;NA&gt;                                      &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  
## 5 b: Data refer to 2018 or the most recent year available.                      &lt;NA&gt;                                      &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  
## 6 &lt;NA&gt;                                                                          &lt;NA&gt;                                      &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;</code></pre>
<p>Inspection of the remaining data frame indicate that the last rows for the data frames are every feature are <code>NA</code>. In addition, some data frames have foot notes at the end of the table that was read in as a value in the first column. These rows are removed.</p>
<p>The below shows that the number of rows in the data frame for each feature is different. This implies not every feature has the same list of countries.</p>
<pre><code>## [1] &quot;Coefficient of Human Inequality feature has 206 rows and 11 columns.&quot;
## [1] &quot;Inequality-adjusted education index feature has 206 rows and 11 columns.&quot;
## [1] &quot;Inequality-adjusted HDI (IHDI) feature has 206 rows and 11 columns.&quot;
## [1] &quot;Inequality-adjusted income index feature has 208 rows and 11 columns.&quot;
## [1] &quot;Inequality-adjusted life expectancy index feature has 208 rows and 11 columns.&quot;
## [1] &quot;Inequality in education (%) feature has 208 rows and 11 columns.&quot;
## [1] &quot;Inequality in income (%) feature has 208 rows and 11 columns.&quot;
## [1] &quot;Inequality in life expectancy (%) feature has 208 rows and 11 columns.&quot;
## [1] &quot;Overall loss in HDI due to inequality (%) feature has 206 rows and 11 columns.&quot;</code></pre>
<p>To investigate this further:</p>
<pre><code>## [1] &quot;Nauru&quot;                               &quot;Tuvalu&quot;                              &quot;Korea (Democratic People&#39;s Rep. of)&quot; &quot;Somalia&quot;</code></pre>
<p>It looks like these four countries shows up for some features and not others. We can expect a lot of missing data for at least these four countries.</p>
<p>The next step is to create a single tidy data frame for <code>Inequality</code>. The data frame for each feature has column headings of 2010 to 2018, which are values not variables. In addition, each data frame is from the same observational unit (<code>Inequality</code>) and should be in one data frame. To convert the list of data frames created from the initial import from the .csv files into a single tidy data frame, use <code>pivot_longer</code> and <code>full_join</code> to create a tidy data frame.</p>
<pre><code>## # A tibble: 6 x 12
##   `HDI Rank (2018~ Country Year  `Coefficient of~ `Inequality-adj~ `Inequality-adj~ `Inequality-adj~ `Inequality-adj~ `Inequality in ~ `Inequality in ~ `Inequality in ~
##              &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;           
## 1              170 Afghan~ 2010  ..               0.226            ..               ..               0.260            39.3             ..               58.8            
## 2              170 Afghan~ 2011  ..               0.227            ..               ..               0.314            39.3             ..               50.9            
## 3              170 Afghan~ 2012  ..               0.237            ..               ..               0.318            39.3             ..               50.9            
## 4              170 Afghan~ 2013  30.0             0.219            0.333            0.391            0.430            45.0             10.8             34.3            
## 5              170 Afghan~ 2014  30.0             0.223            0.335            0.389            0.434            44.8             10.8             34.3            
## 6              170 Afghan~ 2015  30.4             0.224            0.334            0.388            0.429            44.8             10.8             35.7            
## # ... with 1 more variable: `Overall loss in HDI due to inequality (%)` &lt;chr&gt;</code></pre>
<p>Note that the columns of tidy data frame are currently all of type <code>&lt;chr&gt;</code> when only <code>Country</code> should be of type <code>&lt;chr&gt;</code>, <code>Year</code> should be of type integer, and the remaining be of type numeric. This is because missing values are given as ‘..’ instead of <code>NA</code>. Convert the relevant columns to numeric which coerces ‘..’ to <code>NA</code>’s in the process.</p>
<pre><code>## # A tibble: 6 x 12
##   `HDI Rank (2018~ Country  Year `Coefficient of~ `Inequality-adj~ `Inequality-adj~ `Inequality-adj~ `Inequality-adj~ `Inequality in ~ `Inequality in ~ `Inequality in ~
##              &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
## 1              170 Afghan~  2010             NA              0.226           NA               NA                0.26              39.3             NA               58.8
## 2              170 Afghan~  2011             NA              0.227           NA               NA                0.314             39.3             NA               50.9
## 3              170 Afghan~  2012             NA              0.237           NA               NA                0.318             39.3             NA               50.9
## 4              170 Afghan~  2013             30              0.219            0.333            0.391            0.43              45               10.8             34.3
## 5              170 Afghan~  2014             30              0.223            0.335            0.389            0.434             44.8             10.8             34.3
## 6              170 Afghan~  2015             30.4            0.224            0.334            0.388            0.429             44.8             10.8             35.7
## # ... with 1 more variable: `Overall loss in HDI due to inequality (%)` &lt;dbl&gt;</code></pre>
<p>To complete the data transformation, notice that under <code>Country</code>, the last 17 rows of each data frame contain aggregate data regional data, and are not countries:</p>
<pre><code>##  [1] &quot;Human Development&quot;                                      &quot;Very high human development&quot;                            &quot;High human development&quot;                                
##  [4] &quot;Medium human development&quot;                               &quot;Low human development&quot;                                  &quot;Developing Countries&quot;                                  
##  [7] &quot;Regions&quot;                                                &quot;Arab States&quot;                                            &quot;East Asia and the Pacific&quot;                             
## [10] &quot;Europe and Central Asia&quot;                                &quot;Latin America and the Caribbean&quot;                        &quot;South Asia&quot;                                            
## [13] &quot;Sub-Saharan Africa&quot;                                     &quot;Least Developed Countries&quot;                              &quot;Small Island Developing States&quot;                        
## [16] &quot;Organization for Economic Co-operation and Development&quot; &quot;World&quot;</code></pre>
<p>Therefore, they will be removed from the tidy data frame. The head and tail of the tidy data frame is:</p>
<pre><code>## # A tibble: 6 x 12
##   `HDI Rank (2018~ Country  Year `Coefficient of~ `Inequality-adj~ `Inequality-adj~ `Inequality-adj~ `Inequality-adj~ `Inequality in ~ `Inequality in ~ `Inequality in ~
##              &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
## 1              170 Afghan~  2010             NA              0.226           NA               NA                0.26              39.3             NA               58.8
## 2              170 Afghan~  2011             NA              0.227           NA               NA                0.314             39.3             NA               50.9
## 3              170 Afghan~  2012             NA              0.237           NA               NA                0.318             39.3             NA               50.9
## 4              170 Afghan~  2013             30              0.219            0.333            0.391            0.43              45               10.8             34.3
## 5              170 Afghan~  2014             30              0.223            0.335            0.389            0.434             44.8             10.8             34.3
## 6              170 Afghan~  2015             30.4            0.224            0.334            0.388            0.429             44.8             10.8             35.7
## # ... with 1 more variable: `Overall loss in HDI due to inequality (%)` &lt;dbl&gt;</code></pre>
<pre><code>## # A tibble: 6 x 12
##   `HDI Rank (2018~ Country  Year `Coefficient of~ `Inequality-adj~ `Inequality-adj~ `Inequality-adj~ `Inequality-adj~ `Inequality in ~ `Inequality in ~ `Inequality in ~
##              &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
## 1               NA Somalia  2013               NA               NA               NA               NA            0.313             NA                 NA             42.1
## 2               NA Somalia  2014               NA               NA               NA               NA            0.316             43.5               NA             42.1
## 3               NA Somalia  2015               NA               NA               NA               NA            0.32              43.5               NA             42.1
## 4               NA Somalia  2016               NA               NA               NA               NA            0.341             NA                 NA             38.9
## 5               NA Somalia  2017               NA               NA               NA               NA            0.345             NA                 NA             38.9
## 6               NA Somalia  2018               NA               NA               NA               NA            0.348             NA                 NA             38.9
## # ... with 1 more variable: `Overall loss in HDI due to inequality (%)` &lt;dbl&gt;</code></pre>
</div>
<div id="human-security-data-transformation" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Human Security Data Transformation</h2>
<p>Below are the variables pulled from the Human Security dataset:</p>
<ul>
<li><p>Homelessness due to natural disaster (average annual per million people)</p></li>
<li><p>Homicide rate (per 100,000 people)</p></li>
<li><p>Prison population (per 100,000 people)</p></li>
<li><p>Suicide rate (Male) (per 100,000 people)</p></li>
<li><p>Suicide rate (Female) (per 100,000 people)</p></li>
</ul>
<p>Transforming this data largely required reorganizing the dataframe into a tidy format. This was done in a similar fashion to the inequality, and education data manipulations. This required removing blank columns (which had been left in the .csv files for visual appeal) and renaming columns to prime them for the pivot_longer function. Then, to ensure that all missing data were coded appropriately, a for loop was introduced to convert all numeric data columns in the dataset into numeric type. The result is a tidy dataset of all Human Security variables.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-transformation.html#cb10-1" aria-hidden="true" tabindex="-1"></a>Homeless.natural.disaster <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Homeless.natural.disaster.csv&quot;</span>)</span>
<span id="cb10-2"><a href="data-transformation.html#cb10-2" aria-hidden="true" tabindex="-1"></a>Homicide.rate <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Homicide.rate.csv&quot;</span>)</span>
<span id="cb10-3"><a href="data-transformation.html#cb10-3" aria-hidden="true" tabindex="-1"></a>Prison.popn <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Prison.population.csv&quot;</span>)</span>
<span id="cb10-4"><a href="data-transformation.html#cb10-4" aria-hidden="true" tabindex="-1"></a>Refugees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Refugees.CO.csv&quot;</span>)</span>
<span id="cb10-5"><a href="data-transformation.html#cb10-5" aria-hidden="true" tabindex="-1"></a>Suicide.rate.M <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Suicide.rate.M.csv&quot;</span>)</span>
<span id="cb10-6"><a href="data-transformation.html#cb10-6" aria-hidden="true" tabindex="-1"></a>Suicide.rate.F <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Suicide.rate.F.csv&quot;</span>)</span></code></pre></div>
<p>First the blank and extraneous rows are removed from each dataset, and the column names are converted to reflect the year each measurement was taken.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-transformation.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Homeless.natural.disaster)[<span class="dv">2</span><span class="sc">:</span><span class="dv">30</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1990&quot;</span>, <span class="st">&quot;1991&quot;</span>, <span class="st">&quot;1992&quot;</span>, <span class="st">&quot;1993&quot;</span>, <span class="st">&quot;1994&quot;</span>, <span class="st">&quot;1995&quot;</span>, <span class="st">&quot;1996&quot;</span>, <span class="st">&quot;1997&quot;</span>, <span class="st">&quot;1998&quot;</span>, <span class="st">&quot;1999&quot;</span>, <span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2001&quot;</span>, <span class="st">&quot;2002&quot;</span>, <span class="st">&quot;2003&quot;</span>, <span class="st">&quot;2004&quot;</span>, <span class="st">&quot;2005&quot;</span>, <span class="st">&quot;2006&quot;</span>, <span class="st">&quot;2007&quot;</span>, <span class="st">&quot;2008&quot;</span>, <span class="st">&quot;2009&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2011&quot;</span>, <span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>, <span class="st">&quot;2014&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>, <span class="st">&quot;2017&quot;</span>, <span class="st">&quot;2018&quot;</span>)</span>
<span id="cb11-2"><a href="data-transformation.html#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="data-transformation.html#cb11-3" aria-hidden="true" tabindex="-1"></a>Homicide.rate <span class="ot">&lt;-</span> <span class="fu">subset</span>(Homicide.rate, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>, X<span class="fl">.3</span>, X<span class="fl">.4</span>, X<span class="fl">.5</span>, X<span class="fl">.6</span>, X<span class="fl">.7</span>, X<span class="fl">.8</span>, X<span class="fl">.9</span>, X<span class="fl">.10</span>))</span>
<span id="cb11-4"><a href="data-transformation.html#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Homicide.rate)[<span class="dv">2</span><span class="sc">:</span><span class="dv">13</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1990&quot;</span>, <span class="st">&quot;1995&quot;</span>, <span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2005&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2011&quot;</span>, <span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>, <span class="st">&quot;2014&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>, <span class="st">&quot;2017&quot;</span>)</span>
<span id="cb11-5"><a href="data-transformation.html#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="data-transformation.html#cb11-6" aria-hidden="true" tabindex="-1"></a>Refugees <span class="ot">&lt;-</span> <span class="fu">subset</span>(Refugees, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(<span class="dv">1</span>))</span>
<span id="cb11-7"><a href="data-transformation.html#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Refugees)[<span class="dv">2</span><span class="sc">:</span><span class="dv">30</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1990&quot;</span>, <span class="st">&quot;1991&quot;</span>, <span class="st">&quot;1992&quot;</span>, <span class="st">&quot;1993&quot;</span>, <span class="st">&quot;1994&quot;</span>, <span class="st">&quot;1995&quot;</span>, <span class="st">&quot;1996&quot;</span>, <span class="st">&quot;1997&quot;</span>, <span class="st">&quot;1998&quot;</span>, <span class="st">&quot;1999&quot;</span>, <span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2001&quot;</span>, <span class="st">&quot;2002&quot;</span>, <span class="st">&quot;2003&quot;</span>, <span class="st">&quot;2004&quot;</span>, <span class="st">&quot;2005&quot;</span>, <span class="st">&quot;2006&quot;</span>, <span class="st">&quot;2007&quot;</span>, <span class="st">&quot;2008&quot;</span>, <span class="st">&quot;2009&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2011&quot;</span>, <span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>, <span class="st">&quot;2014&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>, <span class="st">&quot;2017&quot;</span>, <span class="st">&quot;2018&quot;</span>)</span>
<span id="cb11-8"><a href="data-transformation.html#cb11-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-9"><a href="data-transformation.html#cb11-9" aria-hidden="true" tabindex="-1"></a>Prison.popn <span class="ot">&lt;-</span> <span class="fu">subset</span>(Prison.popn, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>, X<span class="fl">.3</span>, X<span class="fl">.4</span>, X<span class="fl">.5</span>, X<span class="fl">.6</span>, X<span class="fl">.7</span>, X<span class="fl">.8</span>, X<span class="fl">.9</span>))</span>
<span id="cb11-10"><a href="data-transformation.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Prison.popn)[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2003&quot;</span>, <span class="st">&quot;2005&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2011&quot;</span>, <span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>, <span class="st">&quot;2014&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>, <span class="st">&quot;2017&quot;</span>)</span>
<span id="cb11-11"><a href="data-transformation.html#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="data-transformation.html#cb11-12" aria-hidden="true" tabindex="-1"></a>Suicide.rate.F <span class="ot">&lt;-</span> <span class="fu">subset</span>(Suicide.rate.F, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>))</span>
<span id="cb11-13"><a href="data-transformation.html#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Suicide.rate.F)[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>)</span>
<span id="cb11-14"><a href="data-transformation.html#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="data-transformation.html#cb11-15" aria-hidden="true" tabindex="-1"></a>Suicide.rate.M <span class="ot">&lt;-</span> <span class="fu">subset</span>(Suicide.rate.M, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>))</span>
<span id="cb11-16"><a href="data-transformation.html#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Suicide.rate.M)[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>)</span></code></pre></div>
<p>At this point, a problem became apparent.</p>
<p>Though the UN Data website lists a Refugees dataframe as within the available datasets, there seemed to be no actual data available. When the Refugees by country of origin dataset was downloaded (per the option on the UN Data website), the file, though titled correctly, was a copy of the Homelessness from natural disaster dataset.</p>
<p>Below, the initial row of each dataset is compared to show their similarity.</p>
<pre><code>##       Country  1990  1991  1992  1993  1994  1995  1996  1997
## 1 Afghanistan 0.298 0.304 0.312 0.308 0.303 0.327 0.331 0.335
## 2 Afghanistan 0.298 0.304 0.312 0.308 0.303 0.327 0.331 0.335</code></pre>
<p>A note was sent to the administrators of the UN Data website to alert them to this issue.</p>
<p>However, as a result, the ‘Refugees by country of origin’ dataset was excluded from this study.</p>
<p>Next, the numeric data columns are converted to numeric type. Note that all columns are originally in character type. Converting to numeric type both eases analysis and allows the blank entries, denoted as “..” to be read as empty (NA).</p>
<p>Finally, the data are converted to a tidy format and merged.</p>
</div>
<div id="education-data-transformation" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Education Data Transformation</h2>
<p>The following are the columns in the education dataset:</p>
<ul>
<li><p>Education Index</p></li>
<li><p>Expected years of schooling (years)</p></li>
<li><p>Expected years of schooling, female (years)</p></li>
<li><p>Expected years of schooling, male (years)</p></li>
<li><p>Government expenditure on education (% of GDP)</p></li>
<li><p>Gross enrollment ratio, pre-primary (% of preschool-age children)</p></li>
<li><p>Gross enrollment ratio, primary (% of primary school-age children)</p></li>
<li><p>Gross enrollment ratio, secondary (% of secondary school-age children)</p></li>
<li><p>Gross enrollment ratio, tertiary (% of tertiary school-age children)</p></li>
<li><p>Literacy rate, adult (% ages 15 and older)</p></li>
<li><p>Mean years of schooling (years)</p></li>
<li><p>Mean years of schooling, female(years)</p></li>
<li><p>Mean years of schooling, male (years)</p></li>
<li><p>Percentage of primary schools with access to the internet</p></li>
<li><p>Percentage of secondary schools with access to the internet</p></li>
<li><p>Population with at least some secondary education (% ages 25 and older)</p></li>
<li><p>Population with at least some secondary education, female (% ages 25 and older)</p></li>
<li><p>Population with at least some secondary education, male (% ages 25 and older)</p></li>
<li><p>Primary school dropout rate (% of primary school cohort)</p></li>
<li><p>Primary School teachers trained to teach (%)</p></li>
<li><p>Programme for International Student Assessment (PISA) score in mathematics</p></li>
<li><p>Programme for International Student Assessment (PISA) score in reading</p></li>
<li><p>Programme for International Student Assessment (PISA) score in science</p></li>
<li><p>Pupil-teacher ratio, primary school (number of pupils per teacher)</p></li>
<li><p>Survival rate to the last grade of lower secondary general education (%)</p></li>
</ul>
<p>^ Data for <code>2018</code> is either from 2018 or the latest year available.</p>
<p>Note that the column ‘HDI Rank (2018)’ is kept as a reference column and not for analysis.</p>
<p>In order to read in, and transform the education data, the method is again similar to the previous two examples. Every file is found, and read from the relevant Education directory. With this data we determine the relevant NAs in the files, and code those as such. Similarly, we skip the first lines in the files which are blank. Then we remove any rows that are irrelevant– specifically the rows with footnotes. Finally, we remove additional columns, and change data types if necessary, and are then ready to transform the data into tidy format.</p>
<p>Once the files are read in correctly we create two separate forms of the data. One with each variable as a column, and year as its own singular column, utilizing the pivot longer and wider functions. The other method leaves relevant education variables in a singular column, and another column corresponding to their values. While the second format is not necessarily tidy, this format is kept for future use.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/zanwar369/HumanDevAnalysis/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/zanwar369/HumanDevAnalysis/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
