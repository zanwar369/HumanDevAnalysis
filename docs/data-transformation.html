<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Human Development Analysis</title>
  <meta name="description" content="Chapter 3 Data transformation | Human Development Analysis" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Human Development Analysis" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Human Development Analysis" />
  
  
  

<meta name="author" content="Zohaib Anwar, Lu Bin Liu, Michelle Strayer" />


<meta name="date" content="2020-11-23" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">HumDev</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#inequality-data-transformation"><i class="fa fa-check"></i><b>3.1</b> INEQUALITY DATA TRANSFORMATION</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#human-security-data-transformation"><i class="fa fa-check"></i><b>3.2</b> Human Security Data Transformation</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#education-data-transformation"><i class="fa fa-check"></i><b>3.3</b> Education Data Transformation</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#inequality-missing-data"><i class="fa fa-check"></i><b>4.1</b> Inequality Missing Data</a></li>
<li class="chapter" data-level="4.2" data-path="missing-values.html"><a href="missing-values.html#human-security-missing-data"><i class="fa fa-check"></i><b>4.2</b> Human Security Missing Data</a></li>
<li class="chapter" data-level="4.3" data-path="missing-values.html"><a href="missing-values.html#education-missing-data"><i class="fa fa-check"></i><b>4.3</b> Education Missing Data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Human Development Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<p>In order to work with the amount of data we split the work into three separate buckets– Human Security, education, and inequality.
We all performed similar transformations detailed below.</p>
<div id="inequality-data-transformation" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> INEQUALITY DATA TRANSFORMATION</h2>
<p>The <code>Inequality</code> indicator has 15 features from years 2010 to 2018 (one column per year). However, the data table for 6 of these features were not available for download. The remaining 9 features for which data tables were available and was extracted were:</p>
<ul>
<li><p>Coefficient of Human Inequality</p></li>
<li><p>Inequality-adjusted education index</p></li>
<li><p>Inequality-adjusted HDI (IHDI)</p></li>
<li><p>Inequality-adjusted income index</p></li>
<li><p>Inequality-adjusted life expectancy index</p></li>
<li><p>Inequality in education (%)^</p></li>
<li><p>Inequality in income (%)^</p></li>
<li><p>Inequality in life expectancy (%)</p></li>
<li><p>Overall loss in HDI due to inequality (%)</p></li>
</ul>
<p>^ Data for <code>2018</code> is either from 2018 or the latest year available.</p>
<p>Note that the column ‘HDI Rank (2018)’ is kept as a reference column and not for analysis.</p>
<p>First read all files:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-transformation.html#cb1-1" aria-hidden="true" tabindex="-1"></a>temp <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">&quot;./Inequality/inequality_rawdata&quot;</span>, <span class="at">pattern=</span><span class="st">&quot;*.csv&quot;</span>)</span>
<span id="cb1-2"><a href="data-transformation.html#cb1-2" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-3"><a href="data-transformation.html#cb1-3" aria-hidden="true" tabindex="-1"></a>inequality_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb1-4"><a href="data-transformation.html#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(temp)){</span>
<span id="cb1-5"><a href="data-transformation.html#cb1-5" aria-hidden="true" tabindex="-1"></a>  inequality_list[[i]] <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">paste0</span>(<span class="st">&quot;./Inequality/inequality_rawdata/&quot;</span>, temp[i]), <span class="at">skip =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="data-transformation.html#cb1-6" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">select</span>(<span class="st">&quot;HDI Rank (2018)&quot;</span>, Country, <span class="st">`</span><span class="at">2010</span><span class="st">`</span>, <span class="st">`</span><span class="at">2011</span><span class="st">`</span>, <span class="st">`</span><span class="at">2012</span><span class="st">`</span>, <span class="st">`</span><span class="at">2013</span><span class="st">`</span>, </span>
<span id="cb1-7"><a href="data-transformation.html#cb1-7" aria-hidden="true" tabindex="-1"></a>                           <span class="st">`</span><span class="at">2014</span><span class="st">`</span>, <span class="st">`</span><span class="at">2015</span><span class="st">`</span>, <span class="st">`</span><span class="at">2016</span><span class="st">`</span>, <span class="st">`</span><span class="at">2017</span><span class="st">`</span>, <span class="st">`</span><span class="at">2018</span><span class="st">`</span>) </span>
<span id="cb1-8"><a href="data-transformation.html#cb1-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-9"><a href="data-transformation.html#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(inequality_list) <span class="ot">&lt;-</span> <span class="fu">sub</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">..*&quot;</span>, <span class="st">&quot;&quot;</span>, temp)</span></code></pre></div>
<p>Now to take a high level look at the data itself, print the head and tail of the sixth data frame in the list <code>inequality_list</code>, which contains data for the “Inequality in education (%)” as a sample:</p>
<pre><code>## # A tibble: 6 x 11
##   `HDI Rank (2018)` Country     `2010` `2011` `2012` `2013` `2014` `2015` `2016` `2017` `2018`
##   &lt;chr&gt;             &lt;chr&gt;       &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; 
## 1 170               Afghanistan 39.3   39.3   39.3   45.0   44.8   44.8   45.4   45.4   45.4  
## 2 69                Albania     12.7   11.9   11.9   11.9   11.9   11.9   9.1    8.5    12.3  
## 3 82                Algeria     ..     ..     ..     ..     ..     ..     33.7   33.7   33.7  
## 4 36                Andorra     ..     ..     ..     ..     ..     ..     ..     9.4    10.0  
## 5 149               Angola      26.2   ..     34.6   34.6   34.6   34.6   34.3   34.3   34.3  
## 6 48                Argentina   12.1   12.1   12.1   8.6    8.1    8.1    6.1    6.2    6.2</code></pre>
<pre><code>## # A tibble: 6 x 11
##   `HDI Rank (2018)`                                                                    Country                                       `2010` `2011` `2012` `2013` `2014` `2015` `2016` `2017` `2018`
##   &lt;chr&gt;                                                                                &lt;chr&gt;                                         &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; 
## 1 &lt;NA&gt;                                                                                 Small Island Developing States                27.6   29.6   30.1   22.0   21.1   20.5   19.9   19.6   19.7  
## 2 &lt;NA&gt;                                                                                 Organization for Economic Co-operation and D~ 8.4    9.0    9.6    10.2   9.5    9.5    10.0   8.3    8.2   
## 3 &lt;NA&gt;                                                                                 World                                         26.2   26.3   27.0   27.2   26.9   25.9   25.7   22.3   17.4  
## 4 a: See http://hdr.undp.org/en/composite/IHDI for the list of surveys used to estima~ &lt;NA&gt;                                          &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  
## 5 b: Data refer to 2018 or the most recent year available.                             &lt;NA&gt;                                          &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;  
## 6 &lt;NA&gt;                                                                                 &lt;NA&gt;                                          &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;   &lt;NA&gt;</code></pre>
<p>Inspection of the remaining data frame indicate that the last rows for every data frame in <code>inequality_list</code> are <code>NA</code>. In addition, some data frames have foot notes at the end of the table that was read in as a value in the first column. These rows are removed.</p>
<p>The below shows that the number of rows in the data frame for each feature is different. This implies not every feature has the same list of countries.</p>
<pre><code>## [1] &quot;Coefficient of Human Inequality feature has 206 rows and 11 columns.&quot;
## [1] &quot;Inequality-adjusted education index feature has 206 rows and 11 columns.&quot;
## [1] &quot;Inequality-adjusted HDI (IHDI) feature has 206 rows and 11 columns.&quot;
## [1] &quot;Inequality-adjusted income index feature has 208 rows and 11 columns.&quot;
## [1] &quot;Inequality-adjusted life expectancy index feature has 208 rows and 11 columns.&quot;
## [1] &quot;Inequality in education (%) feature has 208 rows and 11 columns.&quot;
## [1] &quot;Inequality in income (%) feature has 208 rows and 11 columns.&quot;
## [1] &quot;Inequality in life expectancy (%) feature has 208 rows and 11 columns.&quot;
## [1] &quot;Overall loss in HDI due to inequality (%) feature has 206 rows and 11 columns.&quot;</code></pre>
<p>To investigate this further:</p>
<pre><code>## [1] &quot;Nauru&quot;                               &quot;Tuvalu&quot;                              &quot;Korea (Democratic People&#39;s Rep. of)&quot; &quot;Somalia&quot;</code></pre>
<p>It looks like these four countries shows up for some features and not others. We can expect a lot of missing data for at least these four countries.</p>
<p>The next step is to create a single tidy data frames for <code>Inequality</code>. Each data frame in <code>inequality_list</code> has column headings 2010 to 2018 which are values not variables. In addition, each data frame in <code>inequality_list</code> is from the same observational unit (<code>Inequality</code>) and should be in one data frame. To convert the list of data frames <code>inequality_list</code> into a single tidy data frame, use <code>pivot_longer</code> and <code>full_join</code> to create the tidy data frame <code>inequality_df</code>.</p>
<pre><code>## # A tibble: 6 x 12
##   `HDI Rank (2018)` Country  Year  `Coefficient of ~ `Inequality-adjus~ `Inequality-adju~ `Inequality-adju~ `Inequality-adju~ `Inequality in ~ `Inequality in ~ `Inequality in l~ `Overall loss in~
##               &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;             &lt;chr&gt;              &lt;chr&gt;             &lt;chr&gt;             &lt;chr&gt;             &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;             &lt;chr&gt;            
## 1               170 Afghani~ 2010  ..                0.226              ..                ..                0.260             39.3             ..               58.8              ..               
## 2               170 Afghani~ 2011  ..                0.227              ..                ..                0.314             39.3             ..               50.9              ..               
## 3               170 Afghani~ 2012  ..                0.237              ..                ..                0.318             39.3             ..               50.9              ..               
## 4               170 Afghani~ 2013  30.0              0.219              0.333             0.391             0.430             45.0             10.8             34.3              31.4             
## 5               170 Afghani~ 2014  30.0              0.223              0.335             0.389             0.434             44.8             10.8             34.3              31.4             
## 6               170 Afghani~ 2015  30.4              0.224              0.334             0.388             0.429             44.8             10.8             35.7              31.9</code></pre>
<p>Note that the columns of <code>inequality_df</code> are currently all of type <code>&lt;chr&gt;</code> when only <code>Country</code> should be of type <code>&lt;chr&gt;</code>, <code>Year</code> should be of type integer, and the remaining be of type numeric. This is because missing values are given as ‘..’ instead of <code>NA</code>. Convert the relevant columns to numeric which coerces ‘..’ to <code>NA</code>’s in the process.</p>
<pre><code>## # A tibble: 6 x 12
##   `HDI Rank (2018)` Country   Year `Coefficient of ~ `Inequality-adjus~ `Inequality-adju~ `Inequality-adju~ `Inequality-adju~ `Inequality in ~ `Inequality in ~ `Inequality in l~ `Overall loss in~
##               &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt;             &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;
## 1               170 Afghani~  2010              NA                0.226            NA                NA                 0.26              39.3             NA                58.8              NA  
## 2               170 Afghani~  2011              NA                0.227            NA                NA                 0.314             39.3             NA                50.9              NA  
## 3               170 Afghani~  2012              NA                0.237            NA                NA                 0.318             39.3             NA                50.9              NA  
## 4               170 Afghani~  2013              30                0.219             0.333             0.391             0.43              45               10.8              34.3              31.4
## 5               170 Afghani~  2014              30                0.223             0.335             0.389             0.434             44.8             10.8              34.3              31.4
## 6               170 Afghani~  2015              30.4              0.224             0.334             0.388             0.429             44.8             10.8              35.7              31.9</code></pre>
<p>To complete the data transformation, notice that under <code>Country</code>, the last 17 rows of each data frame contain aggregate data regional data, and are not countries:</p>
<pre><code>##  [1] &quot;Human Development&quot;                                      &quot;Very high human development&quot;                            &quot;High human development&quot;                                
##  [4] &quot;Medium human development&quot;                               &quot;Low human development&quot;                                  &quot;Developing Countries&quot;                                  
##  [7] &quot;Regions&quot;                                                &quot;Arab States&quot;                                            &quot;East Asia and the Pacific&quot;                             
## [10] &quot;Europe and Central Asia&quot;                                &quot;Latin America and the Caribbean&quot;                        &quot;South Asia&quot;                                            
## [13] &quot;Sub-Saharan Africa&quot;                                     &quot;Least Developed Countries&quot;                              &quot;Small Island Developing States&quot;                        
## [16] &quot;Organization for Economic Co-operation and Development&quot; &quot;World&quot;</code></pre>
<p>Therefore, they will be removed from <code>inequality_df</code>.</p>
<p>The head and tail of the tidy data frame is:</p>
<pre><code>## # A tibble: 6 x 12
##   `HDI Rank (2018)` Country   Year `Coefficient of ~ `Inequality-adjus~ `Inequality-adju~ `Inequality-adju~ `Inequality-adju~ `Inequality in ~ `Inequality in ~ `Inequality in l~ `Overall loss in~
##               &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt;             &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;
## 1               170 Afghani~  2010              NA                0.226            NA                NA                 0.26              39.3             NA                58.8              NA  
## 2               170 Afghani~  2011              NA                0.227            NA                NA                 0.314             39.3             NA                50.9              NA  
## 3               170 Afghani~  2012              NA                0.237            NA                NA                 0.318             39.3             NA                50.9              NA  
## 4               170 Afghani~  2013              30                0.219             0.333             0.391             0.43              45               10.8              34.3              31.4
## 5               170 Afghani~  2014              30                0.223             0.335             0.389             0.434             44.8             10.8              34.3              31.4
## 6               170 Afghani~  2015              30.4              0.224             0.334             0.388             0.429             44.8             10.8              35.7              31.9</code></pre>
<pre><code>## # A tibble: 6 x 12
##   `HDI Rank (2018)` Country  Year `Coefficient of H~ `Inequality-adjus~ `Inequality-adju~ `Inequality-adju~ `Inequality-adju~ `Inequality in ~ `Inequality in ~ `Inequality in l~ `Overall loss in~
##               &lt;dbl&gt; &lt;chr&gt;   &lt;int&gt;              &lt;dbl&gt;              &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;
## 1                NA Somalia  2013                 NA                 NA                NA                NA             0.313             NA                 NA              42.1                NA
## 2                NA Somalia  2014                 NA                 NA                NA                NA             0.316             43.5               NA              42.1                NA
## 3                NA Somalia  2015                 NA                 NA                NA                NA             0.32              43.5               NA              42.1                NA
## 4                NA Somalia  2016                 NA                 NA                NA                NA             0.341             NA                 NA              38.9                NA
## 5                NA Somalia  2017                 NA                 NA                NA                NA             0.345             NA                 NA              38.9                NA
## 6                NA Somalia  2018                 NA                 NA                NA                NA             0.348             NA                 NA              38.9                NA</code></pre>
</div>
<div id="human-security-data-transformation" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Human Security Data Transformation</h2>
<p>Below is the code required to compose and organize the Human Security dataset.</p>
<p>Transforming this data largely required reorganizing the dataframe into a tidy
format. A great number of data values are missing, discussed below. Converting
the data from its .csv file into a workable R dataframe required removing
blank columns (which had been left in the Excel files for visual appeal) and
renaming columns to prime them for the pivot_longer function. Further, to
avoid losing data when merging the Human Security variable datasets (Homeless-
ness from natural disasters, Homicide rate, Prison population, Refugees by
country of origin, Suicide rate for males, and Suicide rate for females), the
all.x and all.y conditions were specified. Then, to ensure that all missing
data were coded appropriately, a for loop was introduced to convert all numeric
data columns in the dataset into numeric type. The result is a tidy dataset of
all Human Security variables.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-transformation.html#cb11-1" aria-hidden="true" tabindex="-1"></a>Homeless.natural.disaster <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Homeless.natural.disaster.csv&quot;</span>)</span>
<span id="cb11-2"><a href="data-transformation.html#cb11-2" aria-hidden="true" tabindex="-1"></a>Homicide.rate <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Homicide.rate.csv&quot;</span>)</span>
<span id="cb11-3"><a href="data-transformation.html#cb11-3" aria-hidden="true" tabindex="-1"></a>Prison.popn <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Prison.population.csv&quot;</span>)</span>
<span id="cb11-4"><a href="data-transformation.html#cb11-4" aria-hidden="true" tabindex="-1"></a>Refugees <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Refugees.csv&quot;</span>)</span>
<span id="cb11-5"><a href="data-transformation.html#cb11-5" aria-hidden="true" tabindex="-1"></a>Suicide.rate.M <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Suicide.rate.M.csv&quot;</span>)</span>
<span id="cb11-6"><a href="data-transformation.html#cb11-6" aria-hidden="true" tabindex="-1"></a>Suicide.rate.F <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;./HumanSecurity/Suicide.rate.F.csv&quot;</span>)</span>
<span id="cb11-7"><a href="data-transformation.html#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="data-transformation.html#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Homeless.natural.disaster)[<span class="dv">2</span><span class="sc">:</span><span class="dv">30</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1990&quot;</span>, <span class="st">&quot;1991&quot;</span>, <span class="st">&quot;1992&quot;</span>, <span class="st">&quot;1993&quot;</span>, <span class="st">&quot;1994&quot;</span>, <span class="st">&quot;1995&quot;</span>, <span class="st">&quot;1996&quot;</span>, <span class="st">&quot;1997&quot;</span>, <span class="st">&quot;1998&quot;</span>, <span class="st">&quot;1999&quot;</span>, <span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2001&quot;</span>, <span class="st">&quot;2002&quot;</span>, <span class="st">&quot;2003&quot;</span>, <span class="st">&quot;2004&quot;</span>, <span class="st">&quot;2005&quot;</span>, <span class="st">&quot;2006&quot;</span>, <span class="st">&quot;2007&quot;</span>, <span class="st">&quot;2008&quot;</span>, <span class="st">&quot;2009&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2011&quot;</span>, <span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>, <span class="st">&quot;2014&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>, <span class="st">&quot;2017&quot;</span>, <span class="st">&quot;2018&quot;</span>)</span>
<span id="cb11-9"><a href="data-transformation.html#cb11-9" aria-hidden="true" tabindex="-1"></a>dcol <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb11-10"><a href="data-transformation.html#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(Homeless.natural.disaster)) {</span>
<span id="cb11-11"><a href="data-transformation.html#cb11-11" aria-hidden="true" tabindex="-1"></a>  Homeless.natural.disaster[,dcol] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Homeless.natural.disaster[,dcol])</span>
<span id="cb11-12"><a href="data-transformation.html#cb11-12" aria-hidden="true" tabindex="-1"></a>  dcol <span class="ot">&lt;-</span> dcol <span class="sc">+</span><span class="dv">1</span></span>
<span id="cb11-13"><a href="data-transformation.html#cb11-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-14"><a href="data-transformation.html#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="data-transformation.html#cb11-15" aria-hidden="true" tabindex="-1"></a>Homicide.rate <span class="ot">&lt;-</span> <span class="fu">subset</span>(Homicide.rate, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>, X<span class="fl">.3</span>, X<span class="fl">.4</span>, X<span class="fl">.5</span>, X<span class="fl">.6</span>, X<span class="fl">.7</span>, X<span class="fl">.8</span>, X<span class="fl">.9</span>, X<span class="fl">.10</span>))</span>
<span id="cb11-16"><a href="data-transformation.html#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Homicide.rate)[<span class="dv">2</span><span class="sc">:</span><span class="dv">13</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;1990&quot;</span>, <span class="st">&quot;1995&quot;</span>, <span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2005&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2011&quot;</span>, <span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>, <span class="st">&quot;2014&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>, <span class="st">&quot;2017&quot;</span>)</span>
<span id="cb11-17"><a href="data-transformation.html#cb11-17" aria-hidden="true" tabindex="-1"></a>dcol <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb11-18"><a href="data-transformation.html#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(Homicide.rate)) {</span>
<span id="cb11-19"><a href="data-transformation.html#cb11-19" aria-hidden="true" tabindex="-1"></a>  Homicide.rate[,dcol] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Homicide.rate[,dcol])</span>
<span id="cb11-20"><a href="data-transformation.html#cb11-20" aria-hidden="true" tabindex="-1"></a>  dcol <span class="ot">&lt;-</span> dcol <span class="sc">+</span><span class="dv">1</span></span>
<span id="cb11-21"><a href="data-transformation.html#cb11-21" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-22"><a href="data-transformation.html#cb11-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-23"><a href="data-transformation.html#cb11-23" aria-hidden="true" tabindex="-1"></a>Prison.popn <span class="ot">&lt;-</span> <span class="fu">subset</span>(Prison.popn, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>, X<span class="fl">.3</span>, X<span class="fl">.4</span>, X<span class="fl">.5</span>, X<span class="fl">.6</span>, X<span class="fl">.7</span>, X<span class="fl">.8</span>, X<span class="fl">.9</span>))</span>
<span id="cb11-24"><a href="data-transformation.html#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Prison.popn)[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2003&quot;</span>, <span class="st">&quot;2005&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2011&quot;</span>, <span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>, <span class="st">&quot;2014&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>, <span class="st">&quot;2017&quot;</span>)</span>
<span id="cb11-25"><a href="data-transformation.html#cb11-25" aria-hidden="true" tabindex="-1"></a>dcol <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb11-26"><a href="data-transformation.html#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(Prison.popn)) {</span>
<span id="cb11-27"><a href="data-transformation.html#cb11-27" aria-hidden="true" tabindex="-1"></a>  Prison.popn[,dcol] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Prison.popn[,dcol])</span>
<span id="cb11-28"><a href="data-transformation.html#cb11-28" aria-hidden="true" tabindex="-1"></a>  dcol <span class="ot">&lt;-</span> dcol <span class="sc">+</span><span class="dv">1</span></span>
<span id="cb11-29"><a href="data-transformation.html#cb11-29" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-30"><a href="data-transformation.html#cb11-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-31"><a href="data-transformation.html#cb11-31" aria-hidden="true" tabindex="-1"></a>Refugees <span class="ot">&lt;-</span> <span class="fu">subset</span>(Refugees, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>, X<span class="fl">.3</span>, X<span class="fl">.4</span>, X<span class="fl">.5</span>, X<span class="fl">.6</span>, X<span class="fl">.7</span>, X<span class="fl">.8</span>, X<span class="fl">.9</span>))</span>
<span id="cb11-32"><a href="data-transformation.html#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Refugees)[<span class="dv">2</span><span class="sc">:</span><span class="dv">11</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2003&quot;</span>, <span class="st">&quot;2005&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2011&quot;</span>, <span class="st">&quot;2012&quot;</span>, <span class="st">&quot;2013&quot;</span>, <span class="st">&quot;2014&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>, <span class="st">&quot;2017&quot;</span>)</span>
<span id="cb11-33"><a href="data-transformation.html#cb11-33" aria-hidden="true" tabindex="-1"></a>dcol <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb11-34"><a href="data-transformation.html#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(Refugees)) {</span>
<span id="cb11-35"><a href="data-transformation.html#cb11-35" aria-hidden="true" tabindex="-1"></a>  Refugees[,dcol] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Refugees[,dcol])</span>
<span id="cb11-36"><a href="data-transformation.html#cb11-36" aria-hidden="true" tabindex="-1"></a>  dcol <span class="ot">&lt;-</span> dcol <span class="sc">+</span><span class="dv">1</span></span>
<span id="cb11-37"><a href="data-transformation.html#cb11-37" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-38"><a href="data-transformation.html#cb11-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-39"><a href="data-transformation.html#cb11-39" aria-hidden="true" tabindex="-1"></a>Suicide.rate.F <span class="ot">&lt;-</span> <span class="fu">subset</span>(Suicide.rate.F, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>))</span>
<span id="cb11-40"><a href="data-transformation.html#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Suicide.rate.F)[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>)</span>
<span id="cb11-41"><a href="data-transformation.html#cb11-41" aria-hidden="true" tabindex="-1"></a>dcol <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb11-42"><a href="data-transformation.html#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(Suicide.rate.F)) {</span>
<span id="cb11-43"><a href="data-transformation.html#cb11-43" aria-hidden="true" tabindex="-1"></a>  Suicide.rate.F[,dcol] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Suicide.rate.F[,dcol])</span>
<span id="cb11-44"><a href="data-transformation.html#cb11-44" aria-hidden="true" tabindex="-1"></a>  dcol <span class="ot">&lt;-</span> dcol <span class="sc">+</span><span class="dv">1</span></span>
<span id="cb11-45"><a href="data-transformation.html#cb11-45" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-46"><a href="data-transformation.html#cb11-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-47"><a href="data-transformation.html#cb11-47" aria-hidden="true" tabindex="-1"></a>Suicide.rate.M <span class="ot">&lt;-</span> <span class="fu">subset</span>(Suicide.rate.M, <span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(X, X<span class="fl">.1</span>, X<span class="fl">.2</span>))</span>
<span id="cb11-48"><a href="data-transformation.html#cb11-48" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Suicide.rate.M)[<span class="dv">2</span><span class="sc">:</span><span class="dv">5</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;2000&quot;</span>, <span class="st">&quot;2010&quot;</span>, <span class="st">&quot;2015&quot;</span>, <span class="st">&quot;2016&quot;</span>)</span>
<span id="cb11-49"><a href="data-transformation.html#cb11-49" aria-hidden="true" tabindex="-1"></a>dcol <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb11-50"><a href="data-transformation.html#cb11-50" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">ncol</span>(Suicide.rate.M)) {</span>
<span id="cb11-51"><a href="data-transformation.html#cb11-51" aria-hidden="true" tabindex="-1"></a>  Suicide.rate.M[,dcol] <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(Suicide.rate.M[,dcol])</span>
<span id="cb11-52"><a href="data-transformation.html#cb11-52" aria-hidden="true" tabindex="-1"></a>  dcol <span class="ot">&lt;-</span> dcol <span class="sc">+</span><span class="dv">1</span></span>
<span id="cb11-53"><a href="data-transformation.html#cb11-53" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb11-54"><a href="data-transformation.html#cb11-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-55"><a href="data-transformation.html#cb11-55" aria-hidden="true" tabindex="-1"></a>HND <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(Homeless.natural.disaster, <span class="at">cols =</span> <span class="sc">!</span>Country, <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Homeless.ND&quot;</span>)</span>
<span id="cb11-56"><a href="data-transformation.html#cb11-56" aria-hidden="true" tabindex="-1"></a>HR <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(Homicide.rate, <span class="at">cols =</span> <span class="sc">!</span>Country, <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Homicide.rate&quot;</span>)</span>
<span id="cb11-57"><a href="data-transformation.html#cb11-57" aria-hidden="true" tabindex="-1"></a>PP <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(Prison.popn, <span class="at">cols =</span> <span class="sc">!</span>Country, <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Prison.popn&quot;</span>)</span>
<span id="cb11-58"><a href="data-transformation.html#cb11-58" aria-hidden="true" tabindex="-1"></a>R <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(Refugees, <span class="at">cols =</span> <span class="sc">!</span>Country, <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Refugees&quot;</span>)</span>
<span id="cb11-59"><a href="data-transformation.html#cb11-59" aria-hidden="true" tabindex="-1"></a>SRF <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(Suicide.rate.F, <span class="at">cols =</span> <span class="sc">!</span>Country, <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Suicide.rate.F&quot;</span>)</span>
<span id="cb11-60"><a href="data-transformation.html#cb11-60" aria-hidden="true" tabindex="-1"></a>SRM <span class="ot">&lt;-</span> <span class="fu">pivot_longer</span>(Suicide.rate.M, <span class="at">cols =</span> <span class="sc">!</span>Country, <span class="at">names_to =</span> <span class="st">&quot;Year&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;Suicide.rate.M&quot;</span>)</span>
<span id="cb11-61"><a href="data-transformation.html#cb11-61" aria-hidden="true" tabindex="-1"></a>Human.Security <span class="ot">&lt;-</span> <span class="fu">merge</span>(HND, HR, <span class="at">all.x =</span> T, <span class="at">all.y =</span> T)</span>
<span id="cb11-62"><a href="data-transformation.html#cb11-62" aria-hidden="true" tabindex="-1"></a>Human.Security <span class="ot">&lt;-</span> <span class="fu">merge</span>(Human.Security, PP, <span class="at">all.x =</span> T, <span class="at">all.y =</span> T)</span>
<span id="cb11-63"><a href="data-transformation.html#cb11-63" aria-hidden="true" tabindex="-1"></a>Human.Security <span class="ot">&lt;-</span> <span class="fu">merge</span>(Human.Security, R, <span class="at">all.x =</span> T, <span class="at">all.y =</span> T)</span>
<span id="cb11-64"><a href="data-transformation.html#cb11-64" aria-hidden="true" tabindex="-1"></a>Human.Security <span class="ot">&lt;-</span> <span class="fu">merge</span>(Human.Security, SRF, <span class="at">all.x =</span> T, <span class="at">all.y =</span> T)  </span>
<span id="cb11-65"><a href="data-transformation.html#cb11-65" aria-hidden="true" tabindex="-1"></a>Human.Security <span class="ot">&lt;-</span> <span class="fu">merge</span>(Human.Security, SRM, <span class="at">all.x =</span> T, <span class="at">all.y =</span> T)</span>
<span id="cb11-66"><a href="data-transformation.html#cb11-66" aria-hidden="true" tabindex="-1"></a>Human.Security <span class="ot">&lt;-</span> Human.Security[<span class="dv">30</span><span class="sc">:</span><span class="dv">5684</span>,]</span></code></pre></div>
</div>
<div id="education-data-transformation" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Education Data Transformation</h2>
<p>In order to read in the education data– I first take in every file in the relevant Education directory. With this data I determine the relevant NAs in the files, and code those as NAs. Similarly I skip the first line in the file which are blank. Then I remove any rows that are irrelevant– specifically the rows with footnotes. Finally I remove additional columns, and change data types if necessary, and am then ready to transform the data itself.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-transformation.html#cb12-1" aria-hidden="true" tabindex="-1"></a>dr<span class="ot">=</span><span class="st">&quot;./Education/csv&quot;</span></span>
<span id="cb12-2"><a href="data-transformation.html#cb12-2" aria-hidden="true" tabindex="-1"></a>file_list <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path=</span>dr,<span class="at">pattern=</span><span class="st">&quot;*.csv&quot;</span>)</span>
<span id="cb12-3"><a href="data-transformation.html#cb12-3" aria-hidden="true" tabindex="-1"></a>dttyp<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">&quot;EdInd&quot;</span>,<span class="st">&quot;ExpSch&quot;</span>,<span class="st">&quot;ExpSchF&quot;</span>,<span class="st">&quot;ExpSchM&quot;</span>,<span class="st">&quot;GovMon&quot;</span>,<span class="st">&quot;GERPP&quot;</span>,<span class="st">&quot;GERP&quot;</span>,<span class="st">&quot;GERS&quot;</span>,<span class="st">&quot;GERT&quot;</span>,</span>
<span id="cb12-4"><a href="data-transformation.html#cb12-4" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;LitR&quot;</span>,<span class="st">&quot;MYSch&quot;</span>,<span class="st">&quot;MYSchF&quot;</span>,<span class="st">&quot;MYSchM&quot;</span>,<span class="st">&quot;PerPSInt&quot;</span>,<span class="st">&quot;PerSSInt&quot;</span>,<span class="st">&quot;PopSSF25U&quot;</span>,<span class="st">&quot;PopSSM25U&quot;</span>,</span>
<span id="cb12-5"><a href="data-transformation.html#cb12-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;PSDrop&quot;</span>,<span class="st">&quot;PSTchTrn&quot;</span>,<span class="st">&quot;PISAMth&quot;</span>,<span class="st">&quot;PISARead&quot;</span>,<span class="st">&quot;PISAScn&quot;</span>,<span class="st">&quot;PupTchRPS&quot;</span>,<span class="st">&quot;SurvRSGE&quot;</span>)</span>
<span id="cb12-6"><a href="data-transformation.html#cb12-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-7"><a href="data-transformation.html#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(file_list)){</span>
<span id="cb12-8"><a href="data-transformation.html#cb12-8" aria-hidden="true" tabindex="-1"></a>   df_temp<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="fu">paste</span>(dr,<span class="st">&quot;/&quot;</span>,file_list[i],<span class="at">sep=</span><span class="st">&quot;&quot;</span>),<span class="at">skip=</span><span class="dv">1</span>,<span class="at">header=</span>T, </span>
<span id="cb12-9"><a href="data-transformation.html#cb12-9" aria-hidden="true" tabindex="-1"></a>                      <span class="at">check.names =</span> F,<span class="at">na.strings=</span><span class="fu">c</span>(<span class="st">&quot;..&quot;</span>,<span class="st">&quot;&quot;</span>,<span class="st">&quot; &quot;</span>,<span class="st">&quot;&lt;NA&gt;&quot;</span>))</span>
<span id="cb12-10"><a href="data-transformation.html#cb12-10" aria-hidden="true" tabindex="-1"></a>   df_temp<span class="ot">&lt;-</span><span class="fu">subset</span>(df_temp,<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;[a-z]:&quot;</span>,df_temp<span class="sc">$</span><span class="st">`</span><span class="at">HDI Rank (2018)</span><span class="st">`</span>))</span>
<span id="cb12-11"><a href="data-transformation.html#cb12-11" aria-hidden="true" tabindex="-1"></a>   df_temp<span class="sc">$</span><span class="st">`</span><span class="at">HDI Rank (2018)</span><span class="st">`</span><span class="ot">&lt;-</span><span class="fu">as.numeric</span>(df_temp<span class="sc">$</span><span class="st">`</span><span class="at">HDI Rank (2018)</span><span class="st">`</span>)</span>
<span id="cb12-12"><a href="data-transformation.html#cb12-12" aria-hidden="true" tabindex="-1"></a>   df_temp<span class="sc">$</span>var<span class="ot">&lt;-</span>dttyp[i]</span>
<span id="cb12-13"><a href="data-transformation.html#cb12-13" aria-hidden="true" tabindex="-1"></a>   <span class="cf">if</span> (i<span class="sc">==</span><span class="dv">1</span>) {</span>
<span id="cb12-14"><a href="data-transformation.html#cb12-14" aria-hidden="true" tabindex="-1"></a>     df_ed<span class="ot">&lt;-</span>df_temp[<span class="sc">!</span><span class="fu">sapply</span>(df_temp, <span class="cf">function</span>(x) <span class="fu">all</span>(<span class="fu">is.na</span>(x)))]}</span>
<span id="cb12-15"><a href="data-transformation.html#cb12-15" aria-hidden="true" tabindex="-1"></a>   <span class="cf">else</span> {df_ed<span class="ot">&lt;-</span><span class="fu">bind_rows</span>(df_ed,df_temp[<span class="sc">!</span><span class="fu">sapply</span>(df_temp, <span class="cf">function</span>(x) <span class="fu">all</span>(<span class="fu">is.na</span>(x)))])}</span>
<span id="cb12-16"><a href="data-transformation.html#cb12-16" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb12-17"><a href="data-transformation.html#cb12-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb12-18"><a href="data-transformation.html#cb12-18" aria-hidden="true" tabindex="-1"></a>df_ed<span class="ot">&lt;-</span>df_ed[,<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;</span><span class="sc">\\</span><span class="st">.[0-9]&quot;</span>,<span class="fu">colnames</span>(df_ed))]</span></code></pre></div>
<p>Once the files are read in correctly I create two separate forms of the data. One with each variable as a column, and year as its own signular column using pivot longer, and wider, and one where the relevant education vartiables are also in a singular column. While the seconde format is not necessarily tidy this will help look at missings across the data.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-transformation.html#cb13-1" aria-hidden="true" tabindex="-1"></a>df_ed_lg<span class="ot">&lt;-</span>df_ed <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="data-transformation.html#cb13-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">pivot_longer</span>(<span class="at">cols=</span><span class="sc">!</span><span class="fu">c</span>(<span class="st">&quot;HDI Rank (2018)&quot;</span>,<span class="st">&quot;Country&quot;</span>,<span class="st">&quot;var&quot;</span>),<span class="at">names_to=</span><span class="st">&quot;Year&quot;</span>,<span class="at">values_to=</span><span class="st">&quot;HDI&quot;</span>) </span>
<span id="cb13-3"><a href="data-transformation.html#cb13-3" aria-hidden="true" tabindex="-1"></a>df_ed_td<span class="ot">&lt;-</span>df_ed_lg <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="data-transformation.html#cb13-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">pivot_wider</span>(<span class="at">names_from=</span><span class="st">&quot;var&quot;</span>,<span class="at">values_from=</span><span class="st">&quot;HDI&quot;</span>)</span>
<span id="cb13-5"><a href="data-transformation.html#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="data-transformation.html#cb13-6" aria-hidden="true" tabindex="-1"></a>df_ed_td <span class="sc">%&gt;%</span> <span class="fu">write_csv</span>(<span class="st">&#39;./Education/Education_Tidy.csv&#39;</span>)</span>
<span id="cb13-7"><a href="data-transformation.html#cb13-7" aria-hidden="true" tabindex="-1"></a>df_ed_lg <span class="sc">%&gt;%</span> <span class="fu">write_csv</span>(<span class="st">&#39;./Education/Education_Wide.csv&#39;</span>)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/zanwar369/HumanDevAnalysis/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/zanwar369/HumanDevAnalysis/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
